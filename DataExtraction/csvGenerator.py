#!/usr/local/bin/python3
from os import listdir
from os.path import isfile, join
from collections import OrderedDict
import sys
import csv

fpath = '../test/dataset'
apk = sys.argv[1]
df = open('../test/csv/'+apk+'.csv','w')
dmap = open('../Dataset/datasetMap.csv','r')

x = set()
fin = open(fpath+'/'+apk,'r')
for _ in fin.readlines():
    x.add(_.strip())
fin.close()

feature = OrderedDict()
for _ in dmap.readlines():
    a,b = _.strip().split(" ",1)
    feature[b] = a
dmap.close()
for k,v in feature.items():
    if int(v) == len(feature):
        df.write(v)
    else:
        df.write(v+",")
df.write("\n")

row = [str(0)] * len(feature)
for _ in x:
    if _ in feature:
        row[(int(feature[_])-1)] = str(1)
    else:
        pass
df.write(",".join(row))
df.close()