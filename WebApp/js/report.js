$(document).ready(function() {
    appIdValue = location.search.split('=')[1];
    appId = "Submission ID: "+appIdValue;
    $("#appId").append(appId);
    getLabel();
    detail();
});

function getLabel() {
    setTimeout(function(){
        $.ajax({
            url: "/report/"+appIdValue+"",
            type: "GET",
            success: function(data) {
                handleLabel(data);
            }
        });
    },1000);
}

function handleLabel(data) {
    if(data=="") {
        setTimeout(getLabel,1000);
    } else {
        data = JSON.parse(data);
        clearTimeout(getLabel);
        label = "App is a "+data.label+".";
        $("#appLabel").append(label);
        $("#susValue0").append(data.feature4.value);
        $("#susValue1").append(data.feature3.value);
        $("#susValue2").append(data.feature2.value);
        $("#susValue3").append(data.feature1.value);
        $("#susValue4").append(data.feature0.value);
        $("#susFeature0").append(data.feature4.string);
        $("#susFeature1").append(data.feature3.string);
        $("#susFeature2").append(data.feature2.string);
        $("#susFeature3").append(data.feature1.string);
        $("#susFeature4").append(data.feature0.string);
    }
}

function simple() {
    document.getElementById("simple").style.display = "none";
    document.getElementById("detail").style.display = "";
    document.getElementById("details").style.display = "";
}
function detail() {
    document.getElementById("simple").style.display = "";
    document.getElementById("detail").style.display = "none";
    document.getElementById("details").style.display = "none";
}